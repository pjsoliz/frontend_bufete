<div class="detail-container">
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Cargando caso...</p>
  </div>

  <div *ngIf="!loading && caso" class="detail-content">
    <button class="btn-back" (click)="volver()">
      ‚Üê Volver a casos
    </button>

    <div class="detail-header">
      <div>
        <div class="caso-numero">{{ caso.numero_caso }}</div>
        <h1>{{ caso.titulo }}</h1>
      </div>
      <div class="badges">
        <span [class]="'badge ' + getEstadoBadgeClass(caso.estado)">
          {{ caso.estado }}
        </span>
        <span [class]="'badge ' + getPrioridadBadgeClass(caso.prioridad)">
          {{ caso.prioridad }}
        </span>
      </div>
    </div>

    <div class="detail-grid">
      <div class="detail-card">
        <h2>üìã Informaci√≥n General</h2>
        <div class="detail-item">
          <span class="label">Tipo de Caso:</span>
          <span class="value">{{ caso.tipo_caso }}</span>
        </div>
        <div class="detail-item">
          <span class="label">Fecha de Apertura:</span>
          <span class="value">{{ caso.fecha_apertura | date:'dd/MM/yyyy' }}</span>
        </div>
        <div class="detail-item" *ngIf="caso.fecha_cierre">
          <span class="label">Fecha de Cierre:</span>
          <span class="value">{{ caso.fecha_cierre | date:'dd/MM/yyyy' }}</span>
        </div>
        <div class="detail-item" *ngIf="caso.monto_reclamado">
          <span class="label">Monto Reclamado:</span>
          <span class="value">{{ caso.monto_reclamado | currency }}</span>
        </div>
        <div class="detail-item" *ngIf="caso.monto_ganado">
          <span class="label">Monto Ganado:</span>
          <span class="value">{{ caso.monto_ganado | currency }}</span>
        </div>
      </div>

      <div class="detail-card">
        <h2>üë§ Cliente</h2>
        <div class="detail-item">
          <span class="label">Nombre:</span>
          <span class="value">{{ caso.cliente.nombre }} {{ caso.cliente.apellido }}</span>
        </div>
        <div class="detail-item">
          <span class="label">Email:</span>
          <span class="value">{{ caso.cliente.email }}</span>
        </div>
        <div class="detail-item" *ngIf="caso.cliente.telefono">
          <span class="label">Tel√©fono:</span>
          <span class="value">{{ caso.cliente.telefono }}</span>
        </div>
      </div>

      <div class="detail-card" *ngIf="caso.abogado_asignado">
        <h2>‚öñÔ∏è Abogado Asignado</h2>
        <div class="detail-item">
          <span class="label">Nombre:</span>
          <span class="value">{{ caso.abogado_asignado.nombre }} {{ caso.abogado_asignado.apellido }}</span>
        </div>
        <div class="detail-item">
          <span class="label">Email:</span>
          <span class="value">{{ caso.abogado_asignado.email }}</span>
        </div>
        <div class="detail-item" *ngIf="caso.abogado_asignado.telefono">
          <span class="label">Tel√©fono:</span>
          <span class="value">{{ caso.abogado_asignado.telefono }}</span>
        </div>
      </div>
    </div>

    <div class="detail-card full-width">
      <h2>üìù Descripci√≥n del Caso</h2>
      <p class="description-text">{{ caso.descripcion }}</p>
    </div>

    <div class="detail-card full-width" *ngIf="caso.notas_internas">
      <h2>üìå Notas Internas</h2>
      <p class="notes-text">{{ caso.notas_internas }}</p>
    </div>
  </div>
</div>
