<div class="dashboard-admin">

  <!-- Header -->
  <div class="dashboard-header">
    <div class="header-content">
      <h1>Panel de Administración</h1>
      <p>Bienvenido al sistema de gestión legal</p>
    </div>
    <div class="header-date">
      <div class="date-icon">📅</div>
      <div class="date-text">
        <div class="date-day">Viernes, 18 Octubre</div>
<div class="date-year">2025</div>
      </div>
    </div>
  </div>

  <!-- Estadísticas Principales -->
  <div class="estadisticas-grid">
    <div class="stat-card" *ngFor="let stat of estadisticas" [attr.data-color]="stat.color">
      <div class="stat-icon">{{ stat.icon }}</div>
      <div class="stat-content">
        <div class="stat-label">{{ stat.titulo }}</div>
        <div class="stat-value">{{ stat.valor }}</div>
        <div class="stat-cambio" [class.positivo]="stat.tendencia === 'up'" [class.negativo]="stat.tendencia === 'down'">
          <span class="cambio-icon">{{ stat.tendencia === 'up' ? '↗' : '↘' }}</span>
          <span class="cambio-texto">{{ stat.cambio > 0 ? '+' : '' }}{{ stat.cambio }}% vs mes anterior</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Alertas -->
  <div class="alertas-section">
    <div class="alerta-card" *ngFor="let alerta of alertas" [class.urgente]="alerta.tipo === 'urgente'"
         [class.info]="alerta.tipo === 'info'" [class.exito]="alerta.tipo === 'exito'">
      <div class="alerta-icon">{{ alerta.icon }}</div>
      <div class="alerta-content">
        <div class="alerta-titulo">{{ alerta.titulo }}</div>
        <div class="alerta-descripcion">{{ alerta.descripcion }}</div>
      </div>
    </div>
  </div>

  <!-- Grid Principal -->
  <div class="main-grid">

    <!-- Columna Izquierda -->
    <div class="left-column">

      <!-- Gráfica de Casos por Mes -->
      <div class="chart-card">
        <div class="card-header">
          <h2>📊 Casos por Mes</h2>
          <span class="card-subtitle">Últimos 10 meses</span>
        </div>
        <div class="chart-container">
          <div class="bar-chart">
            <div class="bar-item" *ngFor="let item of casosPorMes">
              <div class="bar-column">
                <div class="bar-fill" [style.height.%]="(item.casos / getMaxCasos()) * 100"></div>
              </div>
              <div class="bar-value">{{ item.casos }}</div>
              <div class="bar-label">{{ item.mes }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Casos por Tipo -->
      <div class="chart-card">
        <div class="card-header">
          <h2>📁 Distribución de Casos</h2>
          <span class="card-subtitle">Por tipo de caso</span>
        </div>
        <div class="tipo-casos-list">
          <div class="tipo-item" *ngFor="let tipo of casosPorTipo">
            <div class="tipo-info">
              <div class="tipo-dot" [style.background]="tipo.color"></div>
              <div class="tipo-nombre">{{ tipo.tipo }}</div>
            </div>
            <div class="tipo-stats">
              <div class="tipo-barra-container">
                <div class="tipo-barra-fill" [style.width.%]="getPorcentaje(tipo.cantidad)"
                     [style.background]="tipo.color"></div>
              </div>
              <div class="tipo-cantidad">{{ tipo.cantidad }}</div>
              <div class="tipo-porcentaje">{{ getPorcentaje(tipo.cantidad) }}%</div>
            </div>
          </div>
        </div>
        <div class="tipo-total">
          Total de casos: <strong>{{ getCasosTotal() }}</strong>
        </div>
      </div>

      <!-- Actividad Reciente -->
      <div class="actividad-card">
        <div class="card-header">
          <h2>🕐 Actividad Reciente</h2>
          <button class="ver-todo-btn" (click)="navegarA('/dashboard')">Ver todo</button>
        </div>
        <div class="actividad-lista">
          <div class="actividad-item" *ngFor="let actividad of actividadesRecientes">
            <div class="actividad-icon" [attr.data-color]="actividad.color">
              {{ actividad.icon }}
            </div>
            <div class="actividad-content">
              <div class="actividad-titulo">{{ actividad.titulo }}</div>
              <div class="actividad-descripcion">{{ actividad.descripcion }}</div>
              <div class="actividad-fecha">{{ actividad.fecha }}</div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- Columna Derecha -->
    <div class="right-column">

      <!-- Próximas Citas -->
      <div class="citas-card">
        <div class="card-header">
          <h2>📅 Próximas Citas</h2>
          <button class="ver-todo-btn" (click)="navegarA('/citas')">Ver todas</button>
        </div>
        <div class="citas-lista">
          <div class="cita-item" *ngFor="let cita of citasProximas" (click)="verCita(cita.id)"
               [class.hoy]="esHoy(cita.fecha)">
            <div class="cita-fecha">
              <div class="fecha-dia">{{ cita.fecha | date:'dd' }}</div>
              <div class="fecha-mes">{{ cita.fecha | date:'MMM' }}</div>
            </div>
            <div class="cita-info">
              <div class="cita-titulo">{{ cita.titulo }}</div>
              <div class="cita-cliente">👤 {{ cita.cliente }}</div>
              <div class="cita-detalles">
                <span class="cita-hora">🕐 {{ cita.hora }}</span>
                <span class="cita-tipo">{{ cita.tipo }}</span>
              </div>
            </div>
            <div class="cita-estado" [class.confirmada]="cita.estado === 'confirmada'"
                 [class.pendiente]="cita.estado === 'pendiente'">
              {{ cita.estado === 'confirmada' ? '✅' : '⏳' }}
            </div>
          </div>
        </div>
        <button class="btn-nueva-cita" (click)="navegarA('/citas/nueva')">
          <span class="btn-icon">➕</span>
          Nueva Cita
        </button>
      </div>

      <!-- Acciones Rápidas -->
      <div class="acciones-card">
        <div class="card-header">
          <h2>⚡ Acciones Rápidas</h2>
        </div>
        <div class="acciones-grid">
          <button class="accion-btn" (click)="navegarA('/usuarios')">
            <div class="accion-icon">👤</div>
            <div class="accion-texto">Gestionar Usuarios</div>
          </button>
          <button class="accion-btn" (click)="navegarA('/casos')">
            <div class="accion-icon">📁</div>
            <div class="accion-texto">Ver Casos</div>
          </button>
          <button class="accion-btn" (click)="navegarA('/citas')">
            <div class="accion-icon">📅</div>
            <div class="accion-texto">Gestionar Citas</div>
          </button>
          <button class="accion-btn" (click)="navegarA('/reportes')">
            <div class="accion-icon">📊</div>
            <div class="accion-texto">Ver Reportes</div>
          </button>
        </div>
      </div>

      <!-- Resumen Equipo -->
      <div class="equipo-card">
        <div class="card-header">
          <h2>👥 Resumen del Equipo</h2>
        </div>
        <div class="equipo-stats">
          <div class="equipo-stat">
            <div class="equipo-stat-icon">⚖️</div>
            <div class="equipo-stat-info">
              <div class="equipo-stat-label">Abogados</div>
              <div class="equipo-stat-value">5 activos</div>
            </div>
          </div>
          <div class="equipo-stat">
            <div class="equipo-stat-icon">📋</div>
            <div class="equipo-stat-info">
              <div class="equipo-stat-label">Asistentes</div>
              <div class="equipo-stat-value">4 activos</div>
            </div>
          </div>
          <div class="equipo-stat">
            <div class="equipo-stat-icon">📁</div>
            <div class="equipo-stat-info">
              <div class="equipo-stat-label">Casos Asignados</div>
              <div class="equipo-stat-value">26 casos</div>
            </div>
          </div>
        </div>
      </div>

    </div>

  </div>

</div>
