<div class="form-container">
  <div class="form-header">
    <h1>{{ isEditMode ? '✏️ Editar Cliente' : '➕ Nuevo Cliente' }}</h1>
    <p>{{ isEditMode ? 'Actualiza los datos del cliente' : 'Completa el formulario para registrar un nuevo cliente' }}</p>
  </div>

  <div class="alert alert-success" *ngIf="successMessage">
    ✓ {{ successMessage }}
  </div>

  <div class="alert alert-danger" *ngIf="errorMessage">
    ✕ {{ errorMessage }}
  </div>

  <div *ngIf="loading && isEditMode" class="loading-container">
    <div class="spinner"></div>
    <p>Cargando datos del cliente...</p>
  </div>

  <form [formGroup]="clienteForm" (ngSubmit)="onSubmit()" class="cliente-form">
    
    <h3 class="section-title">📋 Información Personal</h3>

    <div class="form-row">
      <div class="form-group">
        <label for="nombre" class="form-label">Nombre *</label>
        <input 
          type="text" 
          id="nombre" 
          formControlName="nombre"
          class="form-control"
          placeholder="Juan"
          [class.error]="nombre?.invalid && nombre?.touched">
        <div class="error-message" *ngIf="nombre?.invalid && nombre?.touched">
          <span *ngIf="nombre?.errors?.['required']">El nombre es requerido</span>
          <span *ngIf="nombre?.errors?.['minlength']">Mínimo 2 caracteres</span>
        </div>
      </div>

      <div class="form-group">
        <label for="apellido" class="form-label">Apellido *</label>
        <input 
          type="text" 
          id="apellido" 
          formControlName="apellido"
          class="form-control"
          placeholder="Pérez"
          [class.error]="apellido?.invalid && apellido?.touched">
        <div class="error-message" *ngIf="apellido?.invalid && apellido?.touched">
          <span *ngIf="apellido?.errors?.['required']">El apellido es requerido</span>
          <span *ngIf="apellido?.errors?.['minlength']">Mínimo 2 caracteres</span>
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="dni" class="form-label">DNI / Documento</label>
        <input 
          type="text" 
          id="dni" 
          formControlName="dni"
          class="form-control"
          placeholder="12345678A"
          [class.error]="dni?.invalid && dni?.touched">
        <div class="error-message" *ngIf="dni?.invalid && dni?.touched">
          <span *ngIf="dni?.errors?.['pattern']">Formato inválido (5-15 caracteres alfanuméricos)</span>
        </div>
      </div>

      <div class="form-group">
        <label for="fecha_nacimiento" class="form-label">Fecha de Nacimiento</label>
        <input 
          type="date" 
          id="fecha_nacimiento" 
          formControlName="fecha_nacimiento"
          class="form-control">
      </div>

      <div class="form-group">
        <label for="profesion" class="form-label">Profesión</label>
        <input 
          type="text" 
          id="profesion" 
          formControlName="profesion"
          class="form-control"
          placeholder="Ingeniero">
      </div>
    </div>

    <h3 class="section-title">📞 Información de Contacto</h3>

    <div class="form-row">
      <div class="form-group">
        <label for="email" class="form-label">Correo Electrónico *</label>
        <input 
          type="email" 
          id="email" 
          formControlName="email"
          class="form-control"
          placeholder="cliente@example.com"
          [class.error]="email?.invalid && email?.touched"
          [attr.readonly]="isEditMode ? true : null">
        <small class="form-text" *ngIf="isEditMode">El email no se puede modificar</small>
        <div class="error-message" *ngIf="email?.invalid && email?.touched">
          <span *ngIf="email?.errors?.['required']">El email es requerido</span>
          <span *ngIf="email?.errors?.['email']">Email inválido</span>
        </div>
      </div>

      <div class="form-group">
        <label for="telefono" class="form-label">Teléfono</label>
        <input 
          type="tel" 
          id="telefono" 
          formControlName="telefono"
          class="form-control"
          placeholder="555-0100"
          [class.error]="telefono?.invalid && telefono?.touched">
        <div class="error-message" *ngIf="telefono?.invalid && telefono?.touched">
          <span *ngIf="telefono?.errors?.['pattern']">Formato inválido (7-15 dígitos)</span>
        </div>
      </div>
    </div>

    <h3 class="section-title">🏠 Dirección</h3>

    <div class="form-group">
      <label for="direccion" class="form-label">Dirección Completa</label>
      <input 
        type="text" 
        id="direccion" 
        formControlName="direccion"
        class="form-control"
        placeholder="Calle Principal #123, Piso 4">
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="ciudad" class="form-label">Ciudad</label>
        <input 
          type="text" 
          id="ciudad" 
          formControlName="ciudad"
          class="form-control"
          placeholder="La Paz">
      </div>

      <div class="form-group">
        <label for="pais" class="form-label">País</label>
        <input 
          type="text" 
          id="pais" 
          formControlName="pais"
          class="form-control"
          placeholder="Bolivia">
      </div>
    </div>

    <h3 class="section-title">📝 Notas Adicionales</h3>

    <div class="form-group">
      <label for="notas" class="form-label">Notas / Observaciones</label>
      <textarea 
        id="notas" 
        formControlName="notas"
        class="form-control"
        rows="4"
        placeholder="Información adicional sobre el cliente..."></textarea>
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="cancelar()" [disabled]="loading">
        Cancelar
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="clienteForm.invalid || loading">
        <span *ngIf="!loading">{{ isEditMode ? 'Actualizar Cliente' : 'Crear Cliente' }}</span>
        <span *ngIf="loading">Guardando...</span>
      </button>
    </div>

  </form>
</div>