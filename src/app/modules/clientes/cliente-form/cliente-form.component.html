<div class="form-container">
  <!-- Header -->
  <div class="form-header">
    <button class="btn-back" (click)="cancelar()">‚Üê Volver</button>
    <h1>{{ isEditMode ? '‚úèÔ∏è Editar Cliente' : '‚ûï Nuevo Cliente' }}</h1>
    <p>{{ isEditMode ? 'Modifica los datos del cliente' : 'Completa el formulario para registrar un nuevo cliente' }}</p>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="loading-overlay">
    <div class="spinner"></div>
    <p>{{ isEditMode ? 'Cargando cliente...' : 'Guardando cliente...' }}</p>
  </div>

  <!-- Formulario -->
  <form [formGroup]="clienteForm" (ngSubmit)="onSubmit()" class="cliente-form">

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="error-alert">
      ‚ö†Ô∏è {{ errorMessage }}
    </div>

    <!-- Secci√≥n: Informaci√≥n Personal -->
    <div class="form-section">
      <h2>üë§ Informaci√≥n Personal</h2>

      <div class="form-grid">
        <div class="form-group">
          <label for="nombre">Nombre *</label>
          <input
            type="text"
            id="nombre"
            formControlName="nombre"
            placeholder="Ej: Juan"
            [class.error]="clienteForm.get('nombre')?.invalid && clienteForm.get('nombre')?.touched">
          <div class="error-message" *ngIf="clienteForm.get('nombre')?.invalid && clienteForm.get('nombre')?.touched">
            {{ getErrorMessage('nombre') }}
          </div>
        </div>

        <div class="form-group">
          <label for="apellido">Apellido *</label>
          <input
            type="text"
            id="apellido"
            formControlName="apellido"
            placeholder="Ej: P√©rez"
            [class.error]="clienteForm.get('apellido')?.invalid && clienteForm.get('apellido')?.touched">
          <div class="error-message" *ngIf="clienteForm.get('apellido')?.invalid && clienteForm.get('apellido')?.touched">
            {{ getErrorMessage('apellido') }}
          </div>
        </div>

        <div class="form-group">
          <label for="fecha_nacimiento">Fecha de Nacimiento</label>
          <input
            type="date"
            id="fecha_nacimiento"
            formControlName="fecha_nacimiento">
        </div>
      </div>
    </div>

    <!-- Secci√≥n: Documentaci√≥n -->
    <div class="form-section">
      <h2>üìÑ Documentaci√≥n</h2>

      <div class="form-grid">
        <div class="form-group">
          <label for="tipo_documento">Tipo de Documento *</label>
          <select
            id="tipo_documento"
            formControlName="tipo_documento">
            <option *ngFor="let tipo of tiposDocumento" [value]="tipo.value">
              {{ tipo.label }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label for="documento_identidad">N√∫mero de Documento *</label>
          <input
            type="text"
            id="documento_identidad"
            formControlName="documento_identidad"
            placeholder="Ej: 1234567890"
            [class.error]="clienteForm.get('documento_identidad')?.invalid && clienteForm.get('documento_identidad')?.touched">
          <div class="error-message" *ngIf="clienteForm.get('documento_identidad')?.invalid && clienteForm.get('documento_identidad')?.touched">
            {{ getErrorMessage('documento_identidad') }}
          </div>
        </div>
      </div>
    </div>

    <!-- Secci√≥n: Contacto -->
    <div class="form-section">
      <h2>üìû Informaci√≥n de Contacto</h2>

      <div class="form-grid">
        <div class="form-group">
          <label for="email">Email *</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="ejemplo@email.com"
            [class.error]="clienteForm.get('email')?.invalid && clienteForm.get('email')?.touched">
          <div class="error-message" *ngIf="clienteForm.get('email')?.invalid && clienteForm.get('email')?.touched">
            {{ getErrorMessage('email') }}
          </div>
        </div>

        <div class="form-group">
          <label for="telefono">Tel√©fono *</label>
          <input
            type="tel"
            id="telefono"
            formControlName="telefono"
            placeholder="+593-99-123-4567"
            [class.error]="clienteForm.get('telefono')?.invalid && clienteForm.get('telefono')?.touched">
          <div class="error-message" *ngIf="clienteForm.get('telefono')?.invalid && clienteForm.get('telefono')?.touched">
            {{ getErrorMessage('telefono') }}
          </div>
        </div>
      </div>
    </div>

    <!-- Secci√≥n: Ubicaci√≥n -->
    <div class="form-section">
      <h2>üìç Ubicaci√≥n</h2>

      <div class="form-group full-width">
        <label for="direccion">Direcci√≥n</label>
        <input
          type="text"
          id="direccion"
          formControlName="direccion"
          placeholder="Ej: Av. Principal 123">
      </div>

      <div class="form-grid">
        <div class="form-group">
          <label for="ciudad">Ciudad</label>
          <input
            type="text"
            id="ciudad"
            formControlName="ciudad"
            placeholder="Ej: Quito">
        </div>

        <div class="form-group">
          <label for="provincia">Provincia</label>
          <select id="provincia" formControlName="provincia">
            <option value="">Seleccione una provincia</option>
            <option *ngFor="let provincia of provincias" [value]="provincia">
              {{ provincia }}
            </option>
          </select>
        </div>
      </div>
    </div>

    <!-- Secci√≥n: Estado y Notas -->
    <div class="form-section">
      <h2>üìù Informaci√≥n Adicional</h2>

      <div class="form-group" *ngIf="isEditMode">
        <label for="estado">Estado</label>
        <select id="estado" formControlName="estado">
          <option value="activo">Activo</option>
          <option value="inactivo">Inactivo</option>
        </select>
      </div>

      <div class="form-group full-width">
        <label for="notas">Notas / Observaciones</label>
        <textarea
          id="notas"
          formControlName="notas"
          rows="4"
          placeholder="Agregue notas adicionales sobre el cliente..."></textarea>
      </div>
    </div>

    <!-- Botones -->
    <div class="form-actions">
      <button type="button" class="btn-secondary" (click)="cancelar()" [disabled]="loading">
        Cancelar
      </button>
      <button type="submit" class="btn-primary" [disabled]="clienteForm.invalid || loading">
        <span *ngIf="!loading">{{ isEditMode ? 'Actualizar Cliente' : 'Crear Cliente' }}</span>
        <span *ngIf="loading">Guardando...</span>
      </button>
    </div>

  </form>
</div>
